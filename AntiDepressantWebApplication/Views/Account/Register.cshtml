@model AntiDepressantWebApplication.Models.RegisterViewModel
@{
    ViewBag.Title = "Register";
}

<h2>@ViewBag.Title.</h2>

@using (Html.BeginForm("Register", "Account", FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
    @Html.AntiForgeryToken()
    <h4>Create a new account.</h4>
    <hr />
    @Html.ValidationSummary("", new { @class = "text-danger" })
    <div class="form-group">
        @Html.LabelFor(m => m.Email, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.TextBoxFor(m => m.Email, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.GeoLocation, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            <input type="text" id="geo-address" class="form-control" />
            @Html.TextBoxFor(m => m.GeoLocation, new { id= "locationPickerValue", style="display:none" })
        </div>
    </div>
    <div class="form-group"> 
        <div class="col-md-10 col-md-offset-2">
            <div id="locationPicker" style="display:none; width: 500px; height: 300px;"></div>
        </div>
        </div>
    <div class="form-group">
        @Html.LabelFor(m => m.Password, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.PasswordFor(m => m.Password, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        @Html.LabelFor(m => m.ConfirmPassword, new { @class = "col-md-2 control-label" })
        <div class="col-md-10">
            @Html.PasswordFor(m => m.ConfirmPassword, new { @class = "form-control" })
        </div>
    </div>
    <div class="form-group">
        <div class="col-md-offset-2 col-md-10">
            <input type="submit" class="btn btn-default" value="Register" />
        </div>
    </div>
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval");

    <script type="text/javascript" src='http://maps.google.com/maps/api/js?libraries=places&key=AIzaSyAlyo5CZDnx3bjF_4LKIPWObvkKcwg5NN4'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-locationpicker/0.1.12/locationpicker.jquery.min.js"></script>

    <script>

        $(document).ready(function () {
            $('form input').keydown(function (event) {
                if (event.keyCode == 13) {
                    event.preventDefault();
                    return false;
                }
            });
        });

        const locationConfig = {
            location: {
                latitude: 40.7324319,
                longitude: -73.82480777777776
            },
            radius: 2000,
            zoom: 12,
            enableAutocomplete: true,
            enableAutocompleteBlur: true,
            inputBinding: {
                radiusInput: $('#geo-radius'),
                locationNameInput: $('#geo-address')
            },

            onchanged: function (currentLocation, radius, isMarkerDropped) {
                const { latitude, longitude } = currentLocation;
                $('#locationPickerValue').val(`${latitude},${longitude}`);

            },
             oninitialized: function (component) {
                $('#geo-address').val('')

             }
        }



        $('#locationPicker').locationpicker(locationConfig);
    </script>
    
}

